{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport axios from 'axios';\nimport uniqid from 'uniqid';\nconst Mp3Recorder = new MicRecorder({\n  bitRate: 128\n});\nconst recorderStyle = {\n  background: '#fffdfd'\n};\n\nclass Recorder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"start\", () => {\n      window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n      if (this.state.isBlocked) {\n        console.log('Permission Denied');\n      } else {\n        Mp3Recorder.start().then(() => {\n          this.setState({\n            isRecording: true\n          });\n        }).catch(e => console.error(e));\n      }\n    });\n\n    _defineProperty(this, \"stop\", () => {\n      Mp3Recorder.stop().getMp3().then(([buffer, blob]) => {\n        const blobURL = URL.createObjectURL(blob);\n        const filename = uniqid();\n        const file = new File(buffer, filename + '.mp3', {\n          type: blob.type,\n          lastModified: _Date$now()\n        });\n        this.setState({\n          blobURL,\n          buffer,\n          file,\n          isRecording: false,\n          filename\n        });\n      }).catch(e => console.log(e));\n    });\n\n    _defineProperty(this, \"save\", () => {\n      const data = new FormData();\n      data.append('file', this.state.file);\n      data.append('title', this.state.formData.title);\n      data.append('author', this.state.formData.author);\n      data.append('filename', this.state.filename);\n      axios.post(\"http://localhost:3010/api/upload\", data, {// receive two parameter endpoint url ,form data\n      }).then(res => {\n        // then print response status\n        this.props.onUpload(res.data);\n      });\n    });\n\n    _defineProperty(this, \"setForm\", prop => {\n      return ev => {\n        const state = this.state || {};\n        const formData = state.formData || {};\n        this.setState(_Object$assign({}, state, {\n          formData: _Object$assign({}, formData, {\n            [prop]: ev.target.value\n          })\n        }));\n      };\n    });\n\n    _defineProperty(this, \"isFormInvalid\", () => {\n      const state = this.state || {};\n      const formData = state.formData || {};\n      return !formData.author || !formData.title;\n    });\n\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      buffer: '',\n      file: null,\n      isBlocked: false,\n      formData: {\n        author: '',\n        title: ''\n      },\n      filename: ''\n    };\n  }\n\n  componentDidMount() {\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }, () => {\n      console.log('Permission Granted');\n      this.setState({\n        isBlocked: false\n      });\n    }, () => {\n      console.log('Permission Denied');\n      this.setState({\n        isBlocked: true\n      });\n    });\n  }\n\n  render() {\n    const {\n      formData\n    } = this.state;\n    return __jsx(\"div\", {\n      id: \"container\",\n      className: \"jsx-3051490545\"\n    }, __jsx(\"div\", {\n      id: \"input-book\",\n      className: \"jsx-3051490545\"\n    }, __jsx(\"form\", {\n      className: \"jsx-3051490545\"\n    }, __jsx(\"input\", {\n      type: \"text\",\n      onChange: this.setForm('title'),\n      value: formData.title,\n      placeholder: \"Title\",\n      className: \"jsx-3051490545\"\n    }), __jsx(\"input\", {\n      type: \"text\",\n      onChange: this.setForm('author'),\n      value: formData.author,\n      placeholder: \"Author\",\n      className: \"jsx-3051490545\"\n    }))), __jsx(\"header\", {\n      className: \"jsx-3051490545\"\n    }, __jsx(\"button\", {\n      onClick: this.start,\n      disabled: this.state.isRecording,\n      className: \"jsx-3051490545\"\n    }, \"Record\"), __jsx(\"button\", {\n      onClick: this.stop,\n      disabled: !this.state.isRecording,\n      className: \"jsx-3051490545\"\n    }, \"Stop\"), __jsx(\"button\", {\n      onClick: this.save,\n      disabled: this.state.isRecording || !this.state.blobURL || this.isFormInvalid(),\n      className: \"jsx-3051490545\"\n    }, \"Save\")), __jsx(\"audio\", {\n      src: this.state.blobURL,\n      controls: \"controls\",\n      className: \"jsx-3051490545\"\n    }), __jsx(_JSXStyle, {\n      id: \"3051490545\"\n    }, \"div.jsx-3051490545{font-family:'Helvetica','sans-serif';}#container.jsx-3051490545{width:800px;margin-left:auto;margin-right:auto;}h1.jsx-3051490545{color:#ccbc1d;}button.jsx-3051490545{cursor:pointer;font-weight:bold;border:1px solid grey;border-radius:2px;padding:5px;padding-left:8px;padding-right:8px;margin:5px;}input.jsx-3051490545{padding:5px;border:0px;background-color:#f0f0f0;margin:5px;}.description.jsx-3051490545{position:relative;top:-0.2em;}.remove.jsx-3051490545{cursor:pointer;color:#ff257b;font-size:1.5em;}.description.jsx-3051490545{position:relative;top:-0.2em;}.remove.jsx-3051490545{cursor:pointer;color:#ff257b;font-size:1.5em;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXJ5c2hldmNoZW5rby9Eb2N1bWVudHMvTGVhcm5pbmcvTmV4dC9jb21wb25lbnRzL1JlY29yZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJIc0IsQUFHcUQsQUFHMUIsQUFLRSxBQUdDLEFBVUgsQUFNTSxBQUlILEFBS0csQUFJSCxZQXBDRSxBQWtCTixFQWJiLENBR21CLEFBb0JILEFBU0EsR0FiSCxBQVNBLEtBZGMsTUFsQlAsQUF3QnBCLEFBSWtCLEFBS2xCLEFBSWtCLEdBN0JNLEtBWnhCLFFBaUNBLEFBU0EsRUFyQ0EsQ0FrQmEsTUFWTyxLQVdwQixhQVZjLFlBQ0ssaUJBQ0Msa0JBQ1AsV0FDYiIsImZpbGUiOiIvVXNlcnMveXVyeXNoZXZjaGVua28vRG9jdW1lbnRzL0xlYXJuaW5nL05leHQvY29tcG9uZW50cy9SZWNvcmRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBNaWNSZWNvcmRlciBmcm9tICdtaWMtcmVjb3JkZXItdG8tbXAzJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB1bmlxaWQgZnJvbSAndW5pcWlkJztcblxuY29uc3QgTXAzUmVjb3JkZXIgPSBuZXcgTWljUmVjb3JkZXIoeyBiaXRSYXRlOiAxMjggfSk7XG5cbmNvbnN0IHJlY29yZGVyU3R5bGUgPSB7XG4gIGJhY2tncm91bmQ6ICcjZmZmZGZkJ1xufTtcblxuY2xhc3MgUmVjb3JkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzUmVjb3JkaW5nOiBmYWxzZSxcbiAgICAgIGJsb2JVUkw6ICcnLFxuICAgICAgYnVmZmVyOiAnJyxcbiAgICAgIGZpbGU6IG51bGwsXG4gICAgICBpc0Jsb2NrZWQ6IGZhbHNlLFxuICAgICAgZm9ybURhdGE6IHsgYXV0aG9yOiAnJywgdGl0bGU6ICcnfSxcbiAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH07XG4gIH1cblxuICBzdGFydCA9ICgpID0+IHtcbiAgICB3aW5kb3cuQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xuICAgIGlmICh0aGlzLnN0YXRlLmlzQmxvY2tlZCkge1xuICAgICAgY29uc29sZS5sb2coJ1Blcm1pc3Npb24gRGVuaWVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE1wM1JlY29yZGVyXG4gICAgICAgIC5zdGFydCgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNSZWNvcmRpbmc6IHRydWUgfSk7XG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiBjb25zb2xlLmVycm9yKGUpKTtcbiAgICAgfVxuICB9O1xuXG4gICBzdG9wID0gKCkgPT4ge1xuICAgICBNcDNSZWNvcmRlclxuICAgICAgIC5zdG9wKClcbiAgICAgICAuZ2V0TXAzKClcbiAgICAgICAudGhlbigoW2J1ZmZlciwgYmxvYl0pID0+IHtcbiAgICAgICAgIGNvbnN0IGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB1bmlxaWQoKTtcbiAgICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShidWZmZXIsIGZpbGVuYW1lICsgJy5tcDMnLCB7XG4gICAgICAgICAgdHlwZTogYmxvYi50eXBlLFxuICAgICAgICAgIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcbiAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBibG9iVVJMLCBidWZmZXIsIGZpbGUsIGlzUmVjb3JkaW5nOiBmYWxzZSwgZmlsZW5hbWUgfSk7XG4gICAgICAgfSkuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKGUpKTtcbiAgIH07XG5cbiAgIHNhdmUgPSAoKSA9PiB7XG4gICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKVxuICAgICBkYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuc3RhdGUuZmlsZSlcbiAgICAgZGF0YS5hcHBlbmQoJ3RpdGxlJywgdGhpcy5zdGF0ZS5mb3JtRGF0YS50aXRsZSlcbiAgICAgZGF0YS5hcHBlbmQoJ2F1dGhvcicsIHRoaXMuc3RhdGUuZm9ybURhdGEuYXV0aG9yKVxuICAgICBkYXRhLmFwcGVuZCgnZmlsZW5hbWUnLCB0aGlzLnN0YXRlLmZpbGVuYW1lKVxuICAgICBheGlvcy5wb3N0KFwiaHR0cDovL2xvY2FsaG9zdDozMDEwL2FwaS91cGxvYWRcIiwgZGF0YSwgeyAvLyByZWNlaXZlIHR3byBwYXJhbWV0ZXIgZW5kcG9pbnQgdXJsICxmb3JtIGRhdGFcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4geyAvLyB0aGVuIHByaW50IHJlc3BvbnNlIHN0YXR1c1xuICAgICAgICB0aGlzLnByb3BzLm9uVXBsb2FkKHJlcy5kYXRhKTtcbiAgICAgIH0pXG4gICB9O1xuXG4gICBzZXRGb3JtID0gKHByb3ApID0+IHtcbiAgICAgcmV0dXJuIGV2ID0+IHtcbiAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGUgfHwge31cbiAgICAgICBjb25zdCBmb3JtRGF0YSA9IHN0YXRlLmZvcm1EYXRhIHx8IHt9XG4gICAgICAgdGhpcy5zZXRTdGF0ZShPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xuICAgICAgICAgZm9ybURhdGE6IE9iamVjdC5hc3NpZ24oe30sIGZvcm1EYXRhLCB7XG4gICAgICAgICAgIFtwcm9wXTogZXYudGFyZ2V0LnZhbHVlXG4gICAgICAgICB9KVxuICAgICAgIH0pKTtcbiAgICAgfVxuICAgfVxuXG4gICBpc0Zvcm1JbnZhbGlkID0gKCkgPT4ge1xuICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGUgfHwge31cbiAgICAgY29uc3QgZm9ybURhdGEgPSBzdGF0ZS5mb3JtRGF0YSB8fCB7fVxuICAgICByZXR1cm4gIWZvcm1EYXRhLmF1dGhvciB8fCAhZm9ybURhdGEudGl0bGVcbiAgIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0cnVlIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQZXJtaXNzaW9uIEdyYW50ZWQnKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQmxvY2tlZDogZmFsc2UgfSk7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnUGVybWlzc2lvbiBEZW5pZWQnKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQmxvY2tlZDogdHJ1ZSB9KVxuICAgICAgfSxcbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZm9ybURhdGEgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBpZD1cImlucHV0LWJvb2tcIj5cbiAgICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0Rm9ybSgndGl0bGUnKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEudGl0bGV9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUaXRsZVwiIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRGb3JtKCdhdXRob3InKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuYXV0aG9yfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQXV0aG9yXCIgLz5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxoZWFkZXI+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuc3RhcnR9IGRpc2FibGVkPXt0aGlzLnN0YXRlLmlzUmVjb3JkaW5nfT5SZWNvcmQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5zdG9wfSBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNSZWNvcmRpbmd9PlN0b3A8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5zYXZlfSBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc1JlY29yZGluZyB8fCAhdGhpcy5zdGF0ZS5ibG9iVVJMIHx8IHRoaXMuaXNGb3JtSW52YWxpZCgpfT5TYXZlPC9idXR0b24+XG4gICAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgICAgPGF1ZGlvIHNyYz17dGhpcy5zdGF0ZS5ibG9iVVJMfSBjb250cm9scz1cImNvbnRyb2xzXCIgLz5cbiAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgICBmb250LWZhbWlseTogJ0hlbHZldGljYScsICdzYW5zLXNlcmlmJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICNjb250YWluZXIge1xuICAgICAgICAgICAgICB3aWR0aDogODAwcHg7XG4gICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoMSB7XG4gICAgICAgICAgICAgIGNvbG9yOiAjY2NiYzFkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgZ3JleTtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG4gICAgICAgICAgICAgIG1hcmdpbjogNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQge1xuICAgICAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgICAgIGJvcmRlcjogMHB4O1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xuICAgICAgICAgICAgICBtYXJnaW46IDVweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgdG9wOiAtMC4yZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAucmVtb3ZlIHtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBjb2xvcjogI2ZmMjU3YjtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgdG9wOiAtMC4yZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAucmVtb3ZlIHtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBjb2xvcjogI2ZmMjU3YjtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlY29yZGVyO1xuIl19 */\\n/*@ sourceURL=/Users/yuryshevchenko/Documents/Learning/Next/components/Recorder.js */\"));\n  }\n\n}\n\nexport default Recorder;","map":{"version":3,"sources":["/Users/yuryshevchenko/Documents/Learning/Next/components/Recorder.js"],"names":["React","MicRecorder","axios","uniqid","Mp3Recorder","bitRate","recorderStyle","background","Recorder","Component","constructor","props","window","AudioContext","webkitAudioContext","state","isBlocked","console","log","start","then","setState","isRecording","catch","e","error","stop","getMp3","buffer","blob","blobURL","URL","createObjectURL","filename","file","File","type","lastModified","data","FormData","append","formData","title","author","post","res","onUpload","prop","ev","target","value","componentDidMount","navigator","mediaDevices","getUserMedia","audio","render","setForm","save","isFormInvalid"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MicRecorder from 'mic-recorder-to-mp3'\nimport axios from 'axios';\nimport uniqid from 'uniqid';\n\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\nconst recorderStyle = {\n  background: '#fffdfd'\n};\n\nclass Recorder extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      buffer: '',\n      file: null,\n      isBlocked: false,\n      formData: { author: '', title: ''},\n      filename: ''\n    };\n  }\n\n  start = () => {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (this.state.isBlocked) {\n      console.log('Permission Denied');\n    } else {\n      Mp3Recorder\n        .start()\n        .then(() => {\n          this.setState({ isRecording: true });\n        }).catch((e) => console.error(e));\n     }\n  };\n\n   stop = () => {\n     Mp3Recorder\n       .stop()\n       .getMp3()\n       .then(([buffer, blob]) => {\n         const blobURL = URL.createObjectURL(blob);\n         const filename = uniqid();\n         const file = new File(buffer, filename + '.mp3', {\n          type: blob.type,\n          lastModified: Date.now()\n        });\n         this.setState({ blobURL, buffer, file, isRecording: false, filename });\n       }).catch((e) => console.log(e));\n   };\n\n   save = () => {\n     const data = new FormData()\n     data.append('file', this.state.file)\n     data.append('title', this.state.formData.title)\n     data.append('author', this.state.formData.author)\n     data.append('filename', this.state.filename)\n     axios.post(\"http://localhost:3010/api/upload\", data, { // receive two parameter endpoint url ,form data\n      })\n      .then(res => { // then print response status\n        this.props.onUpload(res.data);\n      })\n   };\n\n   setForm = (prop) => {\n     return ev => {\n       const state = this.state || {}\n       const formData = state.formData || {}\n       this.setState(Object.assign({}, state, {\n         formData: Object.assign({}, formData, {\n           [prop]: ev.target.value\n         })\n       }));\n     }\n   }\n\n   isFormInvalid = () => {\n     const state = this.state || {}\n     const formData = state.formData || {}\n     return !formData.author || !formData.title\n   }\n\n  componentDidMount() {\n    navigator.mediaDevices.getUserMedia({ audio: true },\n      () => {\n        console.log('Permission Granted');\n        this.setState({ isBlocked: false });\n      },\n      () => {\n        console.log('Permission Denied');\n        this.setState({ isBlocked: true })\n      },\n    );\n  }\n\n  render() {\n    const { formData } = this.state\n    return (\n        <div id=\"container\">\n          <div id=\"input-book\">\n            <form>\n              <input\n                type=\"text\"\n                onChange={this.setForm('title')}\n                value={formData.title}\n                placeholder=\"Title\" />\n              <input\n                type=\"text\"\n                onChange={this.setForm('author')}\n                value={formData.author}\n                placeholder=\"Author\" />\n            </form>\n          </div>\n\n          <header>\n            <button onClick={this.start} disabled={this.state.isRecording}>Record</button>\n            <button onClick={this.stop} disabled={!this.state.isRecording}>Stop</button>\n            <button onClick={this.save} disabled={this.state.isRecording || !this.state.blobURL || this.isFormInvalid()}>Save</button>\n          </header>\n          <audio src={this.state.blobURL} controls=\"controls\" />\n          <style jsx>{`\n            div {\n              font-family: 'Helvetica', 'sans-serif';\n            }\n            #container {\n              width: 800px;\n              margin-left: auto;\n              margin-right: auto;\n            }\n            h1 {\n              color: #ccbc1d;\n            }\n            button {\n              cursor: pointer;\n              font-weight: bold;\n              border: 1px solid grey;\n              border-radius: 2px;\n              padding: 5px;\n              padding-left: 8px;\n              padding-right: 8px;\n              margin: 5px;\n            }\n            input {\n              padding: 5px;\n              border: 0px;\n              background-color: #f0f0f0;\n              margin: 5px;\n            }\n            .description {\n              position: relative;\n              top: -0.2em;\n            }\n            .remove {\n              cursor: pointer;\n              color: #ff257b;\n              font-size: 1.5em;\n            }\n            .description {\n              position: relative;\n              top: -0.2em;\n            }\n            .remove {\n              cursor: pointer;\n              color: #ff257b;\n              font-size: 1.5em;\n            }\n          `}</style>\n        </div>\n    )\n  }\n\n}\n\nexport default Recorder;\n"]},"metadata":{},"sourceType":"module"}