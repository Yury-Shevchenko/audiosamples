{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport Layout from '../components/MyLayout';\nimport Recorder from '../components/Recorder';\nimport React from 'react';\nimport * as superagent from 'superagent';\nimport Moment from 'react-moment';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  _createClass(_default, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, db, _list, _ref2, list;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n\n                if (!req) {\n                  _context.next = 7;\n                  break;\n                }\n\n                db = req.db;\n                _context.next = 5;\n                return db.collection('Book').find().sort({\n                  createdAt: -1\n                }).toArray();\n\n              case 5:\n                _list = _context.sent;\n                return _context.abrupt(\"return\", {\n                  list: _list\n                });\n\n              case 7:\n                _context.next = 9;\n                return superagent.get('http://localhost:3000/api').then(function (res) {\n                  return res.body;\n                });\n\n              case 9:\n                _ref2 = _context.sent;\n                list = _ref2.list;\n                return _context.abrupt(\"return\", {\n                  list: list\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function _default() {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this));\n    _this.state = {};\n    _this.onUpload = _this.onUpload.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"onUpload\",\n    value: function onUpload(data) {\n      console.log('upload happened', data);\n      var state = this.state || {};\n      var list = this.state.list || this.props.list || [];\n      this.setState(_Object$assign({}, state, {\n        list: [data].concat(list)\n      }));\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(_id) {\n      var _this2 = this;\n\n      return function (ev) {\n        superagent.del(\"http://localhost:3000/api/\".concat(_id)).then(function () {\n          var state = _this2.state || {};\n          var list = _this2.state.list || _this2.props.list || [];\n\n          _this2.setState(_Object$assign({}, state, {\n            list: list.filter(function (book) {\n              return book._id !== _id;\n            })\n          }));\n        })[\"catch\"](function (error) {\n          return console.error(error.stack);\n        });\n      };\n    } // add () {\n    //   return ev => {\n    //     ev.preventDefault()\n    //     const state = this.state || {}\n    //     const formData = state.formData || {}\n    //     this.setState(Object.assign({}, this.state, {\n    //       formData: { author: '', title: '' }\n    //     }))\n    //\n    //     superagent.post('http://localhost:3000/api', formData)\n    //       .then(res => {\n    //         const state = this.state || {}\n    //         const list = this.state.list || this.props.list || []\n    //         this.setState(Object.assign({}, state, {\n    //           list: [res.body.book].concat(list)\n    //         }))\n    //       })\n    //       .catch(error => console.error(error.stack))\n    //   }\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var list = this.state.list || this.props.list;\n      return __jsx(Layout, null, __jsx(\"h1\", {\n        className: \"jsx-1689727413\"\n      }, \"Recorder\"), __jsx(Recorder, {\n        onUpload: this.onUpload\n      }), __jsx(\"h1\", {\n        className: \"jsx-1689727413\"\n      }, \"Records list\"), __jsx(\"div\", {\n        id: \"reading-list\",\n        className: \"jsx-1689727413\"\n      }, __jsx(\"ul\", {\n        className: \"jsx-1689727413\"\n      }, list && list.map(function (book) {\n        return __jsx(\"div\", {\n          key: book._id,\n          className: \"jsx-1689727413\"\n        }, __jsx(\"span\", {\n          onClick: _this3.remove(book._id),\n          className: \"jsx-1689727413\" + \" \" + \"remove\"\n        }, \"\\xD7\"), \"\\xA0\", __jsx(\"span\", {\n          className: \"jsx-1689727413\" + \" \" + \"description\"\n        }, __jsx(\"i\", {\n          className: \"jsx-1689727413\"\n        }, book.title), \" by \", book.author, \" at \", __jsx(Moment, {\n          format: \"YYYY-MM-DD HH:mm:ss\"\n        }, book.createdAt)));\n      }))), __jsx(_JSXStyle, {\n        id: \"1689727413\"\n      }, \"div.jsx-1689727413{font-family:'Helvetica','sans-serif';}#container.jsx-1689727413{width:800px;margin-left:auto;margin-right:auto;}h1.jsx-1689727413{color:#ccbc1d;}button.jsx-1689727413{background-color:#ff257b;color:#ffffff;font-weight:bold;border:0px;border-radius:2px;padding:5px;padding-left:8px;padding-right:8px;margin:5px;}input.jsx-1689727413{padding:5px;border:0px;background-color:#f0f0f0;margin:5px;}.description.jsx-1689727413{position:relative;top:-0.2em;}.remove.jsx-1689727413{cursor:pointer;color:#ff257b;font-size:1.5em;}.description.jsx-1689727413{position:relative;top:-0.2em;}.remove.jsx-1689727413{cursor:pointer;color:#ff257b;font-size:1.5em;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXJ5c2hldmNoZW5rby9Eb2N1bWVudHMvTGVhcm5pbmcvTmV4dC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnR29CLEFBR21ELEFBRzFCLEFBS0UsQUFHVyxBQVdiLEFBTU0sQUFJSCxBQUtHLEFBSUgsWUFyQ0UsQUFtQk4sRUFkYixDQXdCZ0IsQUFTQSxHQWJILEFBU0EsS0FkYyxFQVpYLElBUEksQUF5QnBCLEFBSWtCLEFBS2xCLEFBSWtCLFFBMUNsQixFQVltQixNQXNCbkIsQUFTQSxFQXRDQSxDQW1CYSxRQVhBLEdBWWIsUUFYb0Isa0JBQ04sWUFDSyxpQkFDQyxrQkFDUCxXQUNiIiwiZmlsZSI6Ii9Vc2Vycy95dXJ5c2hldmNoZW5rby9Eb2N1bWVudHMvTGVhcm5pbmcvTmV4dC9wYWdlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9NeUxheW91dCc7XG5pbXBvcnQgUmVjb3JkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9SZWNvcmRlcic7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgc3VwZXJhZ2VudCBmcm9tICdzdXBlcmFnZW50JztcbmltcG9ydCBNb21lbnQgZnJvbSAncmVhY3QtbW9tZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgYXN5bmMgZ2V0SW5pdGlhbFByb3BzICh7IHJlcSB9KSB7XG4gICAgaWYgKHJlcSkge1xuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxXG4gICAgICBjb25zdCBsaXN0ID0gYXdhaXQgZGIuY29sbGVjdGlvbignQm9vaycpLmZpbmQoKS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgICAgICAudG9BcnJheSgpXG4gICAgICByZXR1cm4geyBsaXN0IH1cbiAgICB9XG4gICAgY29uc3QgeyBsaXN0IH0gPSBhd2FpdCBzdXBlcmFnZW50LmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaScpXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmJvZHkpXG4gICAgcmV0dXJuIHsgbGlzdCB9XG4gIH1cblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5vblVwbG9hZCA9IHRoaXMub25VcGxvYWQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uVXBsb2FkIChkYXRhKSB7XG4gICAgY29uc29sZS5sb2coJ3VwbG9hZCBoYXBwZW5lZCcsIGRhdGEpO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZSB8fCB7fTtcbiAgICBjb25zdCBsaXN0ID0gdGhpcy5zdGF0ZS5saXN0IHx8IHRoaXMucHJvcHMubGlzdCB8fCBbXVxuICAgIHRoaXMuc2V0U3RhdGUoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcbiAgICAgIGxpc3Q6IFtkYXRhXS5jb25jYXQobGlzdClcbiAgICB9KSlcbiAgfVxuXG4gIHJlbW92ZSAoX2lkKSB7XG4gICAgcmV0dXJuIGV2ID0+IHtcbiAgICAgIHN1cGVyYWdlbnQuZGVsKGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpLyR7X2lkfWApXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGUgfHwge31cbiAgICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5zdGF0ZS5saXN0IHx8IHRoaXMucHJvcHMubGlzdCB8fCBbXVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcbiAgICAgICAgICAgIGxpc3Q6IGxpc3QuZmlsdGVyKGJvb2sgPT4gYm9vay5faWQgIT09IF9pZClcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3Iuc3RhY2spKVxuICAgIH1cbiAgfVxuXG4gIC8vIGFkZCAoKSB7XG4gIC8vICAgcmV0dXJuIGV2ID0+IHtcbiAgLy8gICAgIGV2LnByZXZlbnREZWZhdWx0KClcbiAgLy8gICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZSB8fCB7fVxuICAvLyAgICAgY29uc3QgZm9ybURhdGEgPSBzdGF0ZS5mb3JtRGF0YSB8fCB7fVxuICAvLyAgICAgdGhpcy5zZXRTdGF0ZShPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXRlLCB7XG4gIC8vICAgICAgIGZvcm1EYXRhOiB7IGF1dGhvcjogJycsIHRpdGxlOiAnJyB9XG4gIC8vICAgICB9KSlcbiAgLy9cbiAgLy8gICAgIHN1cGVyYWdlbnQucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaScsIGZvcm1EYXRhKVxuICAvLyAgICAgICAudGhlbihyZXMgPT4ge1xuICAvLyAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZSB8fCB7fVxuICAvLyAgICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLnN0YXRlLmxpc3QgfHwgdGhpcy5wcm9wcy5saXN0IHx8IFtdXG4gIC8vICAgICAgICAgdGhpcy5zZXRTdGF0ZShPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xuICAvLyAgICAgICAgICAgbGlzdDogW3Jlcy5ib2R5LmJvb2tdLmNvbmNhdChsaXN0KVxuICAvLyAgICAgICAgIH0pKVxuICAvLyAgICAgICB9KVxuICAvLyAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvci5zdGFjaykpXG4gIC8vICAgfVxuICAvLyB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBsaXN0ID0gdGhpcy5zdGF0ZS5saXN0IHx8IHRoaXMucHJvcHMubGlzdFxuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8aDE+XG4gICAgICAgICAgUmVjb3JkZXJcbiAgICAgICAgPC9oMT5cbiAgICAgICAgPFJlY29yZGVyIG9uVXBsb2FkPXt0aGlzLm9uVXBsb2FkfSAvPlxuICAgICAgICA8aDE+XG4gICAgICAgICAgUmVjb3JkcyBsaXN0XG4gICAgICAgIDwvaDE+XG4gICAgICAgIDxkaXYgaWQ9XCJyZWFkaW5nLWxpc3RcIj5cbiAgICAgICAgICA8dWw+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpc3QgJiYgbGlzdC5tYXAoYm9vayA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Jvb2suX2lkfT5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInJlbW92ZVwiIG9uQ2xpY2s9e3RoaXMucmVtb3ZlKGJvb2suX2lkKX0+XG4gICAgICAgICAgICAgICAgICAgICZ0aW1lcztcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpPntib29rLnRpdGxlfTwvaT4gYnkge2Jvb2suYXV0aG9yfSBhdCA8TW9tZW50IGZvcm1hdD1cIllZWVktTU0tREQgSEg6bW06c3NcIj57Ym9vay5jcmVhdGVkQXR9PC9Nb21lbnQ+XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2EnLCAnc2Fucy1zZXJpZic7XG4gICAgICAgICAgfVxuICAgICAgICAgICNjb250YWluZXIge1xuICAgICAgICAgICAgd2lkdGg6IDgwMHB4O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgICAgfVxuICAgICAgICAgIGgxIHtcbiAgICAgICAgICAgIGNvbG9yOiAjY2NiYzFkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMjU3YjtcbiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgICBib3JkZXI6IDBweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDVweDtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogOHB4O1xuICAgICAgICAgICAgbWFyZ2luOiA1cHg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDVweDtcbiAgICAgICAgICAgIGJvcmRlcjogMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcbiAgICAgICAgICAgIG1hcmdpbjogNXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAuZGVzY3JpcHRpb24ge1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgdG9wOiAtMC4yZW07XG4gICAgICAgICAgfVxuICAgICAgICAgIC5yZW1vdmUge1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgY29sb3I6ICNmZjI1N2I7XG4gICAgICAgICAgICBmb250LXNpemU6IDEuNWVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICAuZGVzY3JpcHRpb24ge1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgdG9wOiAtMC4yZW07XG4gICAgICAgICAgfVxuICAgICAgICAgIC5yZW1vdmUge1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgY29sb3I6ICNmZjI1N2I7XG4gICAgICAgICAgICBmb250LXNpemU6IDEuNWVtO1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+XG4gICAgKVxuICB9XG59XG5cbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9NeUxheW91dCdcbi8vIGltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluaydcbi8vIGltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnXG4vL1xuLy8gY29uc3QgSW5kZXggPSBwcm9wcyA9PiAoXG4vLyAgIDxMYXlvdXQ+XG4vLyAgICAgPGgxPkJhdG1hbiBUViBTaG93czwvaDE+XG4vLyAgICAgPHVsPlxuLy8gICAgICAge3Byb3BzLnNob3dzLm1hcChzaG93ID0+IChcbi8vICAgICAgICAgPGxpIGtleT17c2hvdy5pZH0+XG4vLyAgICAgICAgICAgPExpbmsgaHJlZj1cIi9zaG93L1tpZF1cIiBhcz17YC9zaG93LyR7c2hvdy5pZH1gfT5cbi8vICAgICAgICAgICAgIDxhPntzaG93Lm5hbWV9PC9hPlxuLy8gICAgICAgICAgIDwvTGluaz5cbi8vICAgICAgICAgPC9saT5cbi8vICAgICAgICkpfVxuLy8gICAgIDwvdWw+XG4vLyAgIDwvTGF5b3V0PlxuLy8gKVxuLy9cbi8vIEluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uKCkge1xuLy8gICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkudHZtYXplLmNvbS9zZWFyY2gvc2hvd3M/cT1iYXRtYW4nKVxuLy8gICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKVxuLy9cbi8vICAgY29uc29sZS5sb2coYFNob3cgZGF0YSBmZXRjaGVkLiBDb3VudDogJHtkYXRhLmxlbmd0aH1gKVxuLy9cbi8vICAgcmV0dXJuIHtcbi8vICAgICBzaG93czogZGF0YS5tYXAoZW50cnkgPT4gZW50cnkuc2hvdylcbi8vICAgfVxuLy8gfVxuLy9cbi8vIGV4cG9ydCBkZWZhdWx0IEluZGV4XG5cbi8vPGJ1dHRvbiBkaXNhYmxlZD17dGhpcy5pc0Zvcm1JbnZhbGlkKCl9PkFkZDwvYnV0dG9uPlxuIl19 */\\n/*@ sourceURL=/Users/yuryshevchenko/Documents/Learning/Next/pages/index.js */\"));\n    }\n  }]);\n\n  return _default;\n}(React.Component); // import Layout from '../components/MyLayout'\n// import Link from 'next/link'\n// import fetch from 'isomorphic-unfetch'\n//\n// const Index = props => (\n//   <Layout>\n//     <h1>Batman TV Shows</h1>\n//     <ul>\n//       {props.shows.map(show => (\n//         <li key={show.id}>\n//           <Link href=\"/show/[id]\" as={`/show/${show.id}`}>\n//             <a>{show.name}</a>\n//           </Link>\n//         </li>\n//       ))}\n//     </ul>\n//   </Layout>\n// )\n//\n// Index.getInitialProps = async function() {\n//   const res = await fetch('https://api.tvmaze.com/search/shows?q=batman')\n//   const data = await res.json()\n//\n//   console.log(`Show data fetched. Count: ${data.length}`)\n//\n//   return {\n//     shows: data.map(entry => entry.show)\n//   }\n// }\n//\n// export default Index\n//<button disabled={this.isFormInvalid()}>Add</button>\n\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/yuryshevchenko/Documents/Learning/Next/pages/index.js"],"names":["Layout","Recorder","React","superagent","Moment","req","db","collection","find","sort","createdAt","toArray","list","get","then","res","body","state","onUpload","bind","data","console","log","props","setState","concat","_id","ev","del","filter","book","error","stack","map","remove","title","author","Component"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout';\nimport Recorder from '../components/Recorder';\nimport React from 'react';\nimport * as superagent from 'superagent';\nimport Moment from 'react-moment';\n\nexport default class extends React.Component {\n  static async getInitialProps ({ req }) {\n    if (req) {\n      const { db } = req\n      const list = await db.collection('Book').find().sort({ createdAt: -1 })\n        .toArray()\n      return { list }\n    }\n    const { list } = await superagent.get('http://localhost:3000/api')\n      .then(res => res.body)\n    return { list }\n  }\n\n  constructor () {\n    super();\n    this.state = {};\n    this.onUpload = this.onUpload.bind(this);\n  }\n\n  onUpload (data) {\n    console.log('upload happened', data);\n    const state = this.state || {};\n    const list = this.state.list || this.props.list || []\n    this.setState(Object.assign({}, state, {\n      list: [data].concat(list)\n    }))\n  }\n\n  remove (_id) {\n    return ev => {\n      superagent.del(`http://localhost:3000/api/${_id}`)\n        .then(() => {\n          const state = this.state || {}\n          const list = this.state.list || this.props.list || []\n          this.setState(Object.assign({}, state, {\n            list: list.filter(book => book._id !== _id)\n          }))\n        })\n        .catch(error => console.error(error.stack))\n    }\n  }\n\n  // add () {\n  //   return ev => {\n  //     ev.preventDefault()\n  //     const state = this.state || {}\n  //     const formData = state.formData || {}\n  //     this.setState(Object.assign({}, this.state, {\n  //       formData: { author: '', title: '' }\n  //     }))\n  //\n  //     superagent.post('http://localhost:3000/api', formData)\n  //       .then(res => {\n  //         const state = this.state || {}\n  //         const list = this.state.list || this.props.list || []\n  //         this.setState(Object.assign({}, state, {\n  //           list: [res.body.book].concat(list)\n  //         }))\n  //       })\n  //       .catch(error => console.error(error.stack))\n  //   }\n  // }\n\n  render () {\n    const list = this.state.list || this.props.list\n    return (\n      <Layout>\n        <h1>\n          Recorder\n        </h1>\n        <Recorder onUpload={this.onUpload} />\n        <h1>\n          Records list\n        </h1>\n        <div id=\"reading-list\">\n          <ul>\n            {\n              list && list.map(book => (\n                <div key={book._id}>\n                  <span className=\"remove\" onClick={this.remove(book._id)}>\n                    &times;\n                  </span>&nbsp;\n                  <span className=\"description\">\n                    <i>{book.title}</i> by {book.author} at <Moment format=\"YYYY-MM-DD HH:mm:ss\">{book.createdAt}</Moment>\n                  </span>\n                </div>\n              ))\n            }\n          </ul>\n        </div>\n        <style jsx>{`\n          div {\n            font-family: 'Helvetica', 'sans-serif';\n          }\n          #container {\n            width: 800px;\n            margin-left: auto;\n            margin-right: auto;\n          }\n          h1 {\n            color: #ccbc1d;\n          }\n          button {\n            background-color: #ff257b;\n            color: #ffffff;\n            font-weight: bold;\n            border: 0px;\n            border-radius: 2px;\n            padding: 5px;\n            padding-left: 8px;\n            padding-right: 8px;\n            margin: 5px;\n          }\n          input {\n            padding: 5px;\n            border: 0px;\n            background-color: #f0f0f0;\n            margin: 5px;\n          }\n          .description {\n            position: relative;\n            top: -0.2em;\n          }\n          .remove {\n            cursor: pointer;\n            color: #ff257b;\n            font-size: 1.5em;\n          }\n          .description {\n            position: relative;\n            top: -0.2em;\n          }\n          .remove {\n            cursor: pointer;\n            color: #ff257b;\n            font-size: 1.5em;\n          }\n        `}</style>\n      </Layout>\n    )\n  }\n}\n\n// import Layout from '../components/MyLayout'\n// import Link from 'next/link'\n// import fetch from 'isomorphic-unfetch'\n//\n// const Index = props => (\n//   <Layout>\n//     <h1>Batman TV Shows</h1>\n//     <ul>\n//       {props.shows.map(show => (\n//         <li key={show.id}>\n//           <Link href=\"/show/[id]\" as={`/show/${show.id}`}>\n//             <a>{show.name}</a>\n//           </Link>\n//         </li>\n//       ))}\n//     </ul>\n//   </Layout>\n// )\n//\n// Index.getInitialProps = async function() {\n//   const res = await fetch('https://api.tvmaze.com/search/shows?q=batman')\n//   const data = await res.json()\n//\n//   console.log(`Show data fetched. Count: ${data.length}`)\n//\n//   return {\n//     shows: data.map(entry => entry.show)\n//   }\n// }\n//\n// export default Index\n\n//<button disabled={this.isFormInvalid()}>Add</button>\n"]},"metadata":{},"sourceType":"module"}